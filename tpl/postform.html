<?php
/*
    $this->htmlescape()
    $this->post
    $this->alltags
*/
?>
<script src="<?php echo $this->baseurl; ?>js/texttools.js"></script>

<form action="#" method="POST">
    <table class="table">
        <tr>
            <td class="left">Titel:</td><td><input type="text" tabindex="1" name="title" id="title" value="<?php echo $this->htmlescape($this->post->getTitle()); ?>" /></td>
        </tr>
        <tr>
            <td class="left">Datum:</td><td><input type="text" tabindex="2" name="date" value="<?php echo date("Y-m-d H:i:s", $this->post->getDate()); ?>" /></td>
        </tr>
        <tr>
            <td class="left">Ver√∂ffentlicht:</td><td><input type="checkbox" tabindex="3" style="width: auto;" name="published" <?php if ($this->post->isPublished()) echo 'checked="checked" '; ?>/></td>
        </tr>
        <tr>
            <td class="left">
                Inhalt:
                <div style="color: #aaaaaa; padding-top: 1em;">
                    <a href="#" onClick="return makeBold($$$('contenttextarea'));"><b>B</b></a>
                    <a href="#" onClick="return makeItalic($$$('contenttextarea'));"><i>I</i></a>
                    <a href="#" onClick="return makeUnderline($$$('contenttextarea'));"><u>U</u></a>
                    <br />
                    <a href="#" onClick="return insertBreak($$$('contenttextarea'));">br</a>
                    <a href="#" onClick="return insertParagraph($$$('contenttextarea'));">p</a>
                    <a href="#" onClick="return makeHeading($$$('contenttextarea'));">h</a>
                    <a href="#" onClick="return makeAnchor($$$('contenttextarea'));">a</a>
                    <a href="#" onClick="return makeImage($$$('contenttextarea'));">img</a>
                    <br />
                    <a href="#" onClick="return makeImageBox($$$('contenttextarea'));">img-box</a>
                    <br />
                    <a href="#" onClick="return makeCode($$$('contenttextarea'));">code</a>
                    <br />
                    <a href="#" onClick="return makeCodeBlock($$$('contenttextarea'));">code-block</a>
                    <br />
                    <a href="#" onClick="return escapeSelectedText($$$('contenttextarea'));">escape</a>
                    <br />
                    <a href="#" onClick="return unescapeSelectedText($$$('contenttextarea'));">unescape</a>
                </div>
            </td>
            <td><textarea rows="15" tabindex="4" name="content" id="contenttextarea"><?php echo $this->htmlescape($this->post->getContent()); ?></textarea></td>
        </tr>
        <tr>
            <td class="left">
                Erweitert:
                <div style="color: #aaaaaa; padding-top: 1em;">
                    <a href="#" onClick="return makeBold($$$('extendedtextarea'));"><b>B</b></a>
                    <a href="#" onClick="return makeItalic($$$('extendedtextarea'));"><i>I</i></a>
                    <a href="#" onClick="return makeUnderline($$$('extendedtextarea'));"><u>U</u></a>
                    <br />
                    <a href="#" onClick="return insertBreak($$$('extendedtextarea'));">br</a>
                    <a href="#" onClick="return insertParagraph($$$('extendedtextarea'));">p</a>
                    <a href="#" onClick="return makeHeading($$$('extendedtextarea'));">h</a>
                    <a href="#" onClick="return makeAnchor($$$('extendedtextarea'));">a</a>
                    <a href="#" onClick="return makeImage($$$('extendedtextarea'));">img</a>
                    <br />
                    <a href="#" onClick="return makeImageBox($$$('extendedtextarea'));">img-box</a>
                    <br />
                    <a href="#" onClick="return makeCode($$$('extendedtextarea'));">code</a>
                    <br />
                    <a href="#" onClick="return makeCodeBlock($$$('extendedtextarea'));">code-block</a>
                    <br />
                    <a href="#" onClick="return escapeSelectedText($$$('extendedtextarea'));">escape</a>
                    <br />
                    <a href="#" onClick="return unescapeSelectedText($$$('extendedtextarea'));">unescape</a>
                </div>
            </td>
            <td><textarea rows="30" tabindex="5" name="extended" id="extendedtextarea"><?php echo $this->htmlescape($this->post->getExtended()); ?></textarea></td>
        </tr>
        <tr>
            <td class="left">Tags:</td>
            <td>
                <input type="text" tabindex="6" name="tags" id="taginput" value="<?php echo $this->htmlescape(implode(', ', $this->post->getTags())); ?>" />
                <div class="tags"><?php
                    $tags = array();
                    foreach ($this->alltags as $tag) {
                        $tags[] = '<a href="#" onClick="return insertTag(\'' . $this->htmlescape($tag[0]) . '\');">' . $this->htmlescape($tag[0]) . '</a>';
                    }
                    echo implode(', ', $tags);
                ?></div>
            </td>
        </tr>
        <tr>
            <td class="left"></td><td><button type="submit" tabindex="7" name="save" value="save">Speichern</button> <button type="submit" tabindex="8" name="submit">Absenden</button></td>
        </tr>
    </table>
</form>
<script>
    document.getElementById('title').focus();
</script>
